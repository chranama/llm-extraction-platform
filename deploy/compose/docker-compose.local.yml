# deploy/compose/docker-compose.local.yml
services:
  api:
    image: busybox
    command: ["sh", "-c", "echo 'API disabled in local mode'; sleep infinity"]
    ports: []
    healthcheck:
      test: ["CMD-SHELL", "exit 0"]
      interval: 5s
      timeout: 2s
      retries: 1

  nginx:
    volumes:
      - ../observability/nginx/nginx.local.conf:/etc/nginx/nginx.conf:ro
      - ../observability/nginx/.htpasswd:/etc/nginx/.htpasswd:ro
    depends_on: {}

  prometheus:
    volumes:
      - ../observability/prometheus/prometheus.local.yml:/etc/prometheus/prometheus.yml:ro
    ports:
      - "9090:9090"
    depends_on: {}

  postgres:
    ports:
      - "5433:5432"

  redis:
    ports:
      - "6379:6379"

  pgadmin:
    ports:
      - "5050:80"

  grafana:
    ports:
      - "3000:3000"